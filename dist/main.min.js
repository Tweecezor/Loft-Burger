"use strict";function generate_dots(){for(var e=document.querySelectorAll(".section").length,t=document.querySelector(".change__list"),o=0;o<e;o++)o==e-1?t.insertAdjacentHTML("afterBegin","<li class='change__item change__item-active'><a href='#' class='change__link'></a></li>"):t.insertAdjacentHTML("afterBegin","<li class='change__item'><a href='#' class='change__link'></a></li>")}!function(){var e=document.querySelector(".menu__nav"),n=document.querySelectorAll(".assortment"),r=n.length,t=document.querySelector(".menu");e.addEventListener("click",function(){for(var e=0;e<r;e++)n[e].classList.remove("assortment--active");for(var t=function(o){n[o].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),console.log(o),n[o].classList.contains("assortment--active"))n[o].classList.remove("assortment--active");else{for(var t=0;t<r;t++)n[t].classList.remove("assortment--active");n[o].classList.add("assortment--active")}})},o=0;o<r;o++)t(o)}),t.addEventListener("click",function(){for(var e=0;e<r;e++)n[e].classList.remove("assortment--active")})}(),function(){var e=document.querySelector(".team__list"),n=document.querySelectorAll(".personal"),r=document.querySelectorAll(".personal__name"),l=n.length;e.addEventListener("click",function(){for(var e=0;e<l;e++)n[e].classList.remove("personal--active");for(var t=function(o){r[o].addEventListener("click",function(e){if(e.stopPropagation(),e.preventDefault(),n[o].classList.contains("personal--active"))n[o].classList.remove("personal--active");else{for(var t=0;t<l;t++)n[t].classList.remove("personal--active");n[o].classList.add("personal--active")}})},o=0;o<l;o++)t(o)})}(),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.93848,30.31248],zoom:12},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark([59.9,30.31248],{hintContent:"Магазин бургеров №1",balloonContent:"BurgerShop#1"},{iconLayout:"default#image",iconImageHref:"icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),o=new ymaps.Placemark([59.9,30.46],{hintContent:"Магазин бургеров №2",balloonContent:"BurgerShop#2"},{iconLayout:"default#image",iconImageHref:"icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),n=new ymaps.Placemark([59.96,30.32],{hintContent:"Магазин бургеров №3",balloonContent:"BurgerShop#3"},{iconLayout:"default#image",iconImageHref:"icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),r=new ymaps.Placemark([59.94,30.36],{hintContent:"Магазин бургеров №3",balloonContent:"BurgerShop#3"},{iconLayout:"default#image",iconImageHref:"icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]});e.behaviors.disable("scrollZoom"),e.geoObjects.add(t).add(o).add(n).add(r)}),function(){var e=document.getElementById("close-hamburger"),t=document.getElementById("hamburger-menu-open"),o=document.getElementById("hamburger-menu");t.addEventListener("click",function(){o.classList.add("hamburger-menu-visible"),document.body.classList.add("no-scroll")}),e.addEventListener("click",function(){o.classList.remove("hamburger-menu-visible"),document.body.classList.remove("no-scroll")});var n=document.querySelector(".reviews__list"),a=(document.querySelector(".reviews__item"),document.querySelector(".reviews-modal")),s=document.querySelector(".reviews-modal__content"),r=document.querySelector(".reviews-modal__close");n.addEventListener("click",function(e){console.log("burron");var t=e.target;if(console.log(t.tagName),"BUTTON"===t.tagName){console.log("jntkxtyj децствие по уполчанию");var o=document.querySelectorAll(".reviews__text");if("none"==getComputedStyle(o[0]).display){for(var n=0;n<o.length;n++)o[n].style.display="block";a.style.display="block";var r=t.previousElementSibling;s.innerHTML=r.innerHTML;for(var l=0;l<o.length;l++)o[l].style.display="none";document.body.classList.add("no-scroll")}else{a.style.display="block";var c=t.previousElementSibling;s.innerHTML=c.innerHTML,document.body.classList.add("no-scroll")}}}),r.addEventListener("click",function(){a.style.display="none",document.body.classList.remove("no-scroll")}),document.addEventListener("keyup",function(e){27===e.keyCode&&(a.style.display="none",document.body.classList.remove("no-scroll"))})}(),generate_dots();var CURRENT_SECTION=0,down_arrow=document.querySelector(".scroll-down-arrow");down_arrow.addEventListener("click",function(e){e.preventDefault(),scroll(++CURRENT_SECTION),active_dot(CURRENT_SECTION)});var list=document.querySelector(".onepage-slider__list"),nub=100;function nav_menu(){document.querySelector(".nav__list");var e=document.querySelector(".header__buttons"),n=document.querySelectorAll(".nav__item");e.addEventListener("click",function(e){if("Заказать"==e.target.text)scroll(CURRENT_SECTION=7),active_dot(CURRENT_SECTION);else for(var t=function(t){n[t].addEventListener("click",function(e){"Контакты"===e.target.text?scroll(CURRENT_SECTION=t+2):scroll(CURRENT_SECTION=t+1),active_dot(CURRENT_SECTION)})},o=0;o<n.length;o++)t(o)})}nav_menu();var inScroll=!1;function wheel(){document.querySelector("body").addEventListener("wheel",function(e){e.preventDefault(),e.stopPropagation();var t=e.deltaY;t=0<e.deltaY?"down":"up";var o=document.querySelectorAll(".section").length;!1===inScroll&&(inScroll=!0,"up"==t?CURRENT_SECTION<o-1&&(scroll(++CURRENT_SECTION),active_dot(CURRENT_SECTION)):0<CURRENT_SECTION&&(scroll(--CURRENT_SECTION),active_dot(CURRENT_SECTION)),setTimeout(function(){inScroll=!1},1800))},{passive:!1})}function swipe(){$(window).swipe({swipe:function(e,t,o,n,r,l){var c=document.querySelectorAll(".section").length;!1===inScroll&&(inScroll=!0,"up"==t?CURRENT_SECTION<c-1&&(scroll(++CURRENT_SECTION),active_dot(CURRENT_SECTION)):0<CURRENT_SECTION&&(scroll(--CURRENT_SECTION),active_dot(CURRENT_SECTION)),setTimeout(function(){inScroll=!1},1800))}})}wheel(),swipe();for(var dots=document.querySelectorAll(".change__item"),dot_length=dots.length,_loop4=function(t){dots[t].addEventListener("click",function(e){scroll(CURRENT_SECTION=t),active_dot(CURRENT_SECTION)})},i=0;i<dot_length;i++)_loop4(i);function scroll(e){console.log(e+nub),console.log("".concat(e," + 10")),list.style.transform="translateY(".concat(-nub*e,"vh)"),list.style.transition="1.5s"}function active_dot(e){var t=document.querySelectorAll(".change__item"),o=document.querySelector(".change__item-active");o.classList.contains("change__item-active")&&o.classList.remove("change__item-active"),t[e].classList.add("change__item-active")}!function(){var t=document.querySelector(".burger-slider__item").offsetWidth+parseInt(getComputedStyle(document.querySelector(".burger-slider__item"),!0).marginRight),e=document.querySelectorAll(".burger-slider__item").length,o=t*e,n=document.querySelector(".burger-slider__list"),r=document.querySelector(".left-arrow"),l=document.querySelector(".right-arrow"),c=0;n.style.right=c,l.addEventListener("click",function(e){e.preventDefault(),console.log("клик по правой"),c<o&&(console.log(c),c+=t,console.log(c),n.style.right=c+"px"),c==o&&(c=0,console.log(c),n.style.right=c+"px")}),r.addEventListener("click",function(e){e.preventDefault(),console.log("клик по левой"),0<=c&&(c-=t,n.style.right=c+"px"),c<0&&(c=o-t,console.log(c),n.style.right=c+"px")})}(),function(){document.querySelector(".phone-mask").addEventListener("keydown",function(e){var t=!1,o=!1,n=!1;(0<=e.key||e.key<=9)&&(t=!0),"-"==e.key&&(n=!0),"+"==e.key&&(o=!0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key||(n=!0),n||t||o||e.preventDefault()}),document.querySelector(".room").addEventListener("keydown",function(e){var t=!1,o=!1;(0<=e.key||e.key<=9)&&(t=!0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key||(o=!0),o||t||e.preventDefault()}),document.querySelector(".floor").addEventListener("keydown",function(e){var t=!1,o=!1;(0<=e.key||e.key<=9)&&(t=!0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key||(o=!0),o||t||e.preventDefault()});var n=document.querySelector("#order-form"),e=document.querySelector(".order__form-button"),r=document.querySelector(".delivery-modal__content"),l=document.querySelector(".delivery-modal"),t=document.querySelector(".delivery-modal-close");function c(e){return e.checkValidity()?(e.style.border="0.0625rem solid #d1cfcb",!0):("room"==e.name&&console.log("комната не валидна"),!(e.style.border="0.0625rem solid red"))}e.addEventListener("click",function(e){if(e.preventDefault(),function(e){var t=!0;c(e.elements.name)||(t=!1);c(e.elements.phone)||(t=!1);c(e.elements.street)||(t=!1);c(e.elements.comment)||(t=!1);var o=document.querySelectorAll(".order__radio-elem"),n=document.querySelectorAll(".order__radio-fake");if(o[0].checked||o[1].checked)for(var r=0;r<n.length;r++)n[r].style.border="0.0625rem solid #d1cfcb";else{t=!1;for(var l=0;l<n.length;l++)n[l].style.border="0.0625rem solid red"}return t}(n)){var t=new FormData;t.append("name",n.elements.name.value),t.append("phone",n.elements.phone.value),t.append("comment",n.elements.comment.value),t.append("to","your@mail.ru"),console.log(t.getAll);var o=new XMLHttpRequest;o.responseType="json",o.open("POST","https://webdev-api.loftschool.com/sendmail"),o.send(t),o.addEventListener("load",function(){1==o.response.status?r.innerHTML="Сообщениие отправлено":r.innerHTML="Ошибка отправления",l.style.display="block",document.body.classList.add("no-scroll")})}}),t.addEventListener("click",function(e){e.preventDefault(),l.style.display="none",document.body.classList.remove("no-scroll")}),document.addEventListener("keyup",function(e){27===e.keyCode&&(l.style.display="none",document.body.classList.remove("no-scroll"))})}();